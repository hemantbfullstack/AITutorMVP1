<!DOCTYPE html>
<html>
<head>
    <title>Test Image Upload</title>
</head>
<body>
    <h1>Test Wolfram Cloud Image Processing</h1>
    
    <div>
        <h2>Upload a mathematical image to test:</h2>
        <input type="file" id="imageInput" accept="image/*" />
        <button onclick="testImageUpload()">Test Upload</button>
    </div>
    
    <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
        <h3>Result will appear here:</h3>
    </div>

    <script>
        async function testImageUpload() {
            const fileInput = document.getElementById('imageInput');
            const resultDiv = document.getElementById('result');
            
            if (!fileInput.files[0]) {
                resultDiv.innerHTML = '<p style="color: red;">Please select an image file first.</p>';
                return;
            }
            
            const file = fileInput.files[0];
            resultDiv.innerHTML = '<p>Processing image: ' + file.name + ' (' + file.size + ' bytes)...</p>';
            
            try {
                const formData = new FormData();
                formData.append('image', file);
                
                const response = await fetch('http://localhost:3001/api/wolfram/cloud-image', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                resultDiv.innerHTML = `
                    <h3>Wolfram Cloud Analysis Result:</h3>
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Interpretation:</strong> ${data.interpretation || 'No interpretation available'}</p>
                    <p><strong>Has Image:</strong> ${data.imageBase64 ? 'Yes' : 'No'}</p>
                    <p><strong>Extracted Data:</strong> ${JSON.stringify(data.extractedData, null, 2)}</p>
                    ${data.imageBase64 ? `<img src="${data.imageBase64}" style="max-width: 400px; border: 1px solid #ccc;" />` : ''}
                `;
                
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
